# План миграции проекта

1. Создание основных директорий:

   - `src/`: Для основного исходного кода
   - `src/prompts/`: Для хранения промптов
   - `src/commands/`: Для обработчиков команд
   - `src/services/`: Для сервисов и основной бизнес-логики
   - `src/utils/`: Для утилитарных функций
   - `src/types/`: Для определений типов TypeScript
   - `src/config/`: Для конфигурационных файлов

2. Реорганизация файлов:

   a. В директории `src/`:

   - Создать `bot.ts`: Основной файл для инициализации и настройки бота
   - Перенести `index.ts` в эту директорию

   b. В директории `src/commands/`:

   - Создать `coder.ts`: Перенести `coderChatbotHandler` из `coder-chatbot.ts`
   - Создать другие файлы для разных команд (например, `gpt.ts`, `image.ts`)

   c. В директории `src/services/`:

   - Создать `anthropic.ts`: Перенести логику работы с API Anthropic
   - Создать `openai.ts`: Перенести логику работы с API OpenAI
   - Создать `discord.ts`: Перенести вспомогательные функции, связанные с Discord

   d. В директории `src/utils/`:

   - Перенести `utils.ts`
   - Перенести `image-processing.ts`

   e. В директории `src/types/`:

   - Создать файл `index.ts` для общих типов
   - Создать отдельные файлы для типов, специфичных для разных частей приложения

   f. В директории `src/config/`:

   - Создать `bot-config.ts`: Для хранения конфигурации бота

   g. В директории `src/prompts/`:

   - Создать `rude-ai.ts`: Для хранения промпта грубого ИИ
   - Создать `coder.ts`: Для хранения промпта кодера
   - Перенести `farcry3.ts` в эту директорию

3. Тесты:

   - Разместить тесты рядом с соответствующими файлами с расширением `.test.ts`
     Например:
     - `src/utils/image-processing.test.ts`
     - `src/services/anthropic.test.ts`

4. Обновление импортов:

   - Обновить все импорты в файлах, чтобы они соответствовали новой структуре проекта

5. Обновление `package.json`:

   - Обновить скрипты для работы с новой структурой проекта
   - Обновить путь к основному файлу (`main`)

6. Обновление `tsconfig.json`:

   - Настроить пути для новой структуры проекта

7. Создание модуля для работы с базой данных (если потребуется в будущем):

   - Создать директорию `src/db/` для файлов, связанных с базой данных

8. Проверка и тестирование:

   - После завершения миграции, проверить работоспособность всех функций
   - Запустить тесты, если они есть
   - Проверить работу бота в тестовом окружении

9. Документация:

   - Обновить README.md с описанием новой структуры проекта
   - Добавить комментарии к новым или измененным частям кода, если необходимо

10. Финальная проверка и деплой:
    - Провести код-ревью
    - Выполнить деплой обновленного проекта
    - Мониторить работу бота после деплоя для выявления возможных проблем
